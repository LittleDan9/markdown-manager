// GitHub File Tree Component Styles
// Theme-aware styles for GitHub file tree navigation

// File Tree Styles
.file-tree {
  .file-tree-item {
    transition: background-color 0.15s ease-in-out;

    &.file-tree-clickable:hover {
      background-color: var(--bs-secondary-bg);
      cursor: pointer;
    }

    &.bg-primary:hover {
      background-color: var(--bs-primary) !important;
      opacity: 0.9;
    }
  }
}

// Custom File Tree Styles
.github-file-tree {
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden; // Ensure tree doesn't overflow its container

  .tree-header {
    background: linear-gradient(135deg, var(--bs-light), var(--bs-secondary-bg));
    border-bottom: 1px solid var(--bs-border-color);
    font-weight: 600;
    color: var(--bs-body-color);
    position: relative;
    z-index: 2;
    flex-shrink: 0; // Prevent header from shrinking

    // Ensure breadcrumb items are properly aligned
    .breadcrumb {
      margin: 0 !important;
      padding: 0 !important;
      background: none !important;
      border: none !important;

      .breadcrumb-item {
        margin: 0 !important;
        padding: 0 !important;
        line-height: 1 !important;

        &::before {
          content: var(--bs-breadcrumb-divider, "/") !important;
          margin: 0 0.5rem !important;
          color: var(--bs-breadcrumb-divider-color, var(--bs-nav-link-disabled-color)) !important;
        }

        &:first-child::before {
          content: none !important;
        }
      }
    }

    // Dark theme enhancements
    [data-bs-theme="dark"] & {
      background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
      color: #fff;
    }

    // Bootstrap handles overflow with overflow-auto class
  }

  .tree-body {
    flex: 1;
    overflow-y: auto;
    position: relative;
    z-index: 1;

    .list-group-item {
      border: none;
      padding: 0.375rem 0.75rem;
      transition: background-color 0.15s ease-in-out;

      &:hover:not(.active) {
        background-color: var(--bs-secondary-bg);

        // Enhanced dark theme hover
        [data-bs-theme="dark"] & {
          background-color: rgba(255, 255, 255, 0.05);
        }
      }

      &.active {
        background-color: var(--bs-primary-bg-subtle);
        color: var(--bs-primary-text-emphasis);
        border-color: var(--bs-primary-border-subtle);

        &:hover {
          background-color: var(--bs-primary-bg-subtle);
          opacity: 0.9;
        }

        // Dark theme selected state
        [data-bs-theme="dark"] & {
          background-color: rgba(13, 110, 253, 0.25);
          color: #fff;
          border-color: rgba(13, 110, 253, 0.5);
        }
      }

      .tree-item-content {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        width: 100%;

        .tree-item-icon {
          flex-shrink: 0;
          width: 16px;
          text-align: center;
        }

        .tree-item-name {
          flex: 1;
          min-width: 0;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
      }

      .bi-chevron-right, .bi-chevron-down {
        color: var(--bs-text-muted);
        font-size: 0.75rem;
        transition: transform 0.15s ease;

        // Dark theme chevron
        [data-bs-theme="dark"] & {
          color: #adb5bd;
        }
      }

      .bi-chevron-down {
        transform: rotate(0deg);
      }

      .bi-chevron-right {
        transform: rotate(0deg);

        &.rotated {
          transform: rotate(90deg);
        }
      }

      // Folder icons with theme-aware colors
      .bi-folder, .bi-folder-fill {
        color: var(--bs-primary);

        [data-bs-theme="dark"] & {
          color: #66b3ff;
        }

        &.expanded {
          color: var(--bs-warning); // Default to yellow for expanded folders
        }
      }

      // File type icons with enhanced dark theme colors
      .file-icon {
        &.markdown {
          color: #083fa1;

          [data-bs-theme="dark"] & {
            color: #4dabf7;
          }
        }

        &.javascript {
          color: #f0db4f;

          [data-bs-theme="dark"] & {
            color: #ffd43b;
          }
        }

        &.typescript {
          color: #007acc;

          [data-bs-theme="dark"] & {
            color: #4fc3f7;
          }
        }

        &.python {
          color: #306998;

          [data-bs-theme="dark"] & {
            color: #4fc3f7;
          }
        }

        &.css {
          color: #1572b6;

          [data-bs-theme="dark"] & {
            color: #42a5f5;
          }
        }

        &.html {
          color: #e34c26;

          [data-bs-theme="dark"] & {
            color: #ff7043;
          }
        }

        &.json {
          color: #0084ff;

          [data-bs-theme="dark"] & {
            color: #42a5f5;
          }
        }

        &.xml {
          color: #6f42c1; // Purple

          [data-bs-theme="dark"] & {
            color: #ab47bc;
          }
        }

        &.yaml, &.yml {
          color: #cb171e;

          [data-bs-theme="dark"] & {
            color: #ef5350;
          }
        }

        &.docker {
          color: #0db7ed;

          [data-bs-theme="dark"] & {
            color: #29b6f6;
          }
        }

        &.git {
          color: #f05032; // Git orange

          [data-bs-theme="dark"] & {
            color: #ff7043;
          }
        }

        &.shell, &.bash {
          color: #4eaa25;

          [data-bs-theme="dark"] & {
            color: #66bb6a;
          }
        }

        &.config {
          color: #6c757d;

          [data-bs-theme="dark"] & {
            color: #9e9e9e;
          }
        }

        &.sql {
          color: #e38c00;

          [data-bs-theme="dark"] & {
            color: #ffa726;
          }
        }

        &.ruby {
          color: #cc342d; // Ruby red

          [data-bs-theme="dark"] & {
            color: #ef5350;
          }
        }

        &.go {
          color: #00add8;

          [data-bs-theme="dark"] & {
            color: #26c6da;
          }
        }

        &.rust {
          color: #ce422b;

          [data-bs-theme="dark"] & {
            color: #ff7043;
          }
        }

        &.java {
          color: #ed8b00;

          [data-bs-theme="dark"] & {
            color: #ffa726;
          }
        }

        &.default {
          color: var(--bs-text-muted);

          [data-bs-theme="dark"] & {
            color: #9e9e9e;
          }
        }
      }
    }

    // Hover effects for icons
    .list-group-item:hover .file-icon {
      opacity: 0.8;
    }

    // Depth indicators with theme-aware subtle lines
    .tree-item[data-depth] {
      &[data-depth="1"] { padding-left: 1.5rem; }
      &[data-depth="2"] { padding-left: 2.5rem; }
      &[data-depth="3"] { padding-left: 3.5rem; }
      &[data-depth="4"] { padding-left: 4.5rem; }
      &[data-depth="5"] { padding-left: 5.5rem; }
      &[data-depth="6"] { padding-left: 6.5rem; }

      &::before {
        content: '';
        position: absolute;
        left: calc(var(--depth, 0) * 1rem + 0.25rem);
        top: 0;
        bottom: 0;
        width: 1px;
        background-color: rgba(var(--bs-border-color-rgb), 0.3);

        [data-bs-theme="dark"] & {
          background-color: rgba(255, 255, 255, 0.1);
        }
      }
    }
  }
}
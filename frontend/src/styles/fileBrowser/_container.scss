// File Browser Container Styles
// Main layout and structure for the unified file browser

.unified-file-browser {
  position: relative;
  z-index: 1;
  height: 100%;
  max-height: 100%; // Ensure it doesn't exceed container
  display: flex;
  flex-direction: column;
  overflow: hidden;

  // Make sure the wrapper inserted into the modal body (file-open-modal-container)
  // and the root `.unified-file-browser` behave like a column flex that fills
  // the modal body height. This lets internal `.file-browser-content` use
  // `flex: 1` and correctly expand/shrink.
  .file-open-modal-container,
  & {
    height: 100%;
    min-height: 0; // allow flex children to shrink
    display: flex;
    flex-direction: column;
  }

  // Loading state
  &.loading {
    opacity: 0.7;
    pointer-events: none;
  }

  // Breadcrumb should be fixed height
  .breadcrumb-section {
    flex-shrink: 0; // Prevent breadcrumb from shrinking
    height: auto;
    min-height: 0;
  }

  // Main content area (flexible height)
  .file-browser-content {
    flex: 1; // Take remaining space after breadcrumb and actions
    display: flex;
    overflow: hidden;
    position: relative;
    min-height: 0; // important for nested flex scrolling
    max-height: 100%; // Prevent overflow
    margin: 0; // Remove any default margins
    padding: 0; // Remove any default padding
    height: auto; // let flex sizing determine the height
    align-items: stretch;

    // Tree panel (fixed width)
    .file-browser-tree-panel {
      width: 25%;
      flex-shrink: 0;
      border-right: 1px solid var(--bs-border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      min-height: 0;
      max-height: 100%;
    }

    // List panel (flexible width)
    .file-browser-list-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      min-width: 0;
      height: 100%;
      min-height: 0;
      max-height: 100%;
    }

    // Preview panel (fixed width)
    .file-browser-preview-panel {
      width: 30%;
      flex-shrink: 0;
      border-left: 1px solid var(--bs-border-color);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      min-height: 0;
      max-height: 100%;
    }

    // Bottom gradient
    .bottom-gradient {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 20px;
      background: linear-gradient(to top, rgba(var(--bs-body-bg-rgb), 0.9), transparent);
      pointer-events: none;
      z-index: 1;
    }
  }

  // Dark theme support for gradient
  [data-bs-theme="dark"] & {
    .bottom-gradient {
      background: linear-gradient(to top, rgba(33, 37, 41, 0.9), transparent) !important;
    }
  }
}
